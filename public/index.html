<html>
<head>
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<style>
	html, body {
		width: 100%;
		height: 100%;
		margin: 0;
		padding: 0;
	}
	</style>
</head>
<body>
	<script>
	
	window.onload = function() {
		var ws = new WebSocket('ws://localhost:8080');

		ws.onmessage = function (event) {
			var packet = JSON.parse(event.data);
			window.dispatchEvent(new CustomEvent('packet_received', {"detail": packet}));
		}

		window.addEventListener('packet_received', function (event) {
			var packet = event.detail;
		}, false);
	}

	</script>
</body>
</html>